<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Net::SSH::Transport::Session</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Net::SSH::Transport::Session</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../../files/lib/net/ssh/transport/session_rb.html">
                lib/net/ssh/transport/session.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The transport layer represents the lowest level of the <a
href="../../SSH.html">SSH</a> protocol, and implements basic message
exchanging and protocol initialization. It will never be instantiated
directly (unless you really know what you&#8216;re about), but will instead
be created for you automatically when you create a <a
href="Session.html#M000354">new</a> <a href="../../SSH.html">SSH</a>
session via <a href="../../SSH.html#M000130">Net::SSH.start</a>.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000357">close</a>&nbsp;&nbsp;
      <a href="#M000356">closed?</a>&nbsp;&nbsp;
      <a href="#M000369">configure_client</a>&nbsp;&nbsp;
      <a href="#M000370">configure_server</a>&nbsp;&nbsp;
      <a href="#M000368">enqueue_message</a>&nbsp;&nbsp;
      <a href="#M000371">hint</a>&nbsp;&nbsp;
      <a href="#M000355">host_as_string</a>&nbsp;&nbsp;
      <a href="#M000354">new</a>&nbsp;&nbsp;
      <a href="#M000363">next_message</a>&nbsp;&nbsp;
      <a href="#M000362">peer</a>&nbsp;&nbsp;
      <a href="#M000364">poll_message</a>&nbsp;&nbsp;
      <a href="#M000366">push</a>&nbsp;&nbsp;
      <a href="#M000360">rekey!</a>&nbsp;&nbsp;
      <a href="#M000361">rekey_as_needed</a>&nbsp;&nbsp;
      <a href="#M000367">send_message</a>&nbsp;&nbsp;
      <a href="#M000359">service_request</a>&nbsp;&nbsp;
      <a href="#M000358">shutdown!</a>&nbsp;&nbsp;
      <a href="#M000365">wait</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="Constants.html">Constants</a></span>
        <span class="include-name"><a href="../Loggable.html">Loggable</a></span>
      </div>
    </div>

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">DEFAULT_PORT</td>
          <td>=</td>
          <td class="context-item-value">22</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
The standard port for the <a href="../../SSH.html">SSH</a> protocol.

</td>
        </tr>
        </table>
      </div>
    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">algorithms</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The <a href="Algorithms.html">Algorithms</a> instance used to perform key
exchanges.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">host</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The host to connect to, as given to the constructor.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">host_key_verifier</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The host-key verifier object used to verify host keys, to ensure that the
connection is not being spoofed.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">options</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The hash of options that were given to the object at initialization.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">port</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The port number to connect to, as given in the options to the constructor.
If no port number was given, this will default to DEFAULT_PORT.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">server_version</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The <a href="ServerVersion.html">ServerVersion</a> instance that
encapsulates the negotiated protocol version.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">socket</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The underlying socket object being used to communicate with the remote
host.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000354" class="method-detail">
        <a name="M000354"></a>

        <div class="method-heading">
          <a href="Session.src/M000354.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000354.html');return false;">
          <span class="method-name">new</span><span class="method-args">(host, options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Instantiates a <a href="Session.html#M000354">new</a> transport layer
abstraction. This will block until the initial key exchange completes,
leaving you with a ready-to-use transport session.
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000357" class="method-detail">
        <a name="M000357"></a>

        <div class="method-heading">
          <a href="Session.src/M000357.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000357.html');return false;">
          <span class="method-name">close</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Cleans up (see <a
href="PacketStream.html#M000329">PacketStream#cleanup</a>) and closes the
underlying socket.
</p>
        </div>
      </div>

      <div id="method-M000356" class="method-detail">
        <a name="M000356"></a>

        <div class="method-heading">
          <a href="Session.src/M000356.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000356.html');return false;">
          <span class="method-name">closed?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the underlying socket has been closed.
</p>
        </div>
      </div>

      <div id="method-M000369" class="method-detail">
        <a name="M000369"></a>

        <div class="method-heading">
          <a href="Session.src/M000369.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000369.html');return false;">
          <span class="method-name">configure_client</span><span class="method-args">(options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Configure&#8216;s the packet stream&#8216;s client state with the given set
of options. This is typically used to define the cipher, compression, and
hmac algorithms to use when sending packets to the server.
</p>
        </div>
      </div>

      <div id="method-M000370" class="method-detail">
        <a name="M000370"></a>

        <div class="method-heading">
          <a href="Session.src/M000370.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000370.html');return false;">
          <span class="method-name">configure_server</span><span class="method-args">(options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Configure&#8216;s the packet stream&#8216;s server state with the given set
of options. This is typically used to define the cipher, compression, and
hmac algorithms to use when reading packets from the server.
</p>
        </div>
      </div>

      <div id="method-M000368" class="method-detail">
        <a name="M000368"></a>

        <div class="method-heading">
          <a href="Session.src/M000368.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000368.html');return false;">
          <span class="method-name">enqueue_message</span><span class="method-args">(message)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Enqueues the given message, such that it will be sent at the earliest
opportunity. This does not block, but returns immediately.
</p>
        </div>
      </div>

      <div id="method-M000371" class="method-detail">
        <a name="M000371"></a>

        <div class="method-heading">
          <a href="Session.src/M000371.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000371.html');return false;">
          <span class="method-name">hint</span><span class="method-args">(which, value=true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets a <a href="Session.html#M000354">new</a> <a
href="Session.html#M000371">hint</a> for the packet stream, which the
packet stream may use to change its behavior. (See PacketStream#hints).
</p>
        </div>
      </div>

      <div id="method-M000355" class="method-detail">
        <a name="M000355"></a>

        <div class="method-heading">
          <a href="Session.src/M000355.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000355.html');return false;">
          <span class="method-name">host_as_string</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the host (and possibly IP address) in a format compatible with <a
href="../../SSH.html">SSH</a> known-host files.
</p>
        </div>
      </div>

      <div id="method-M000363" class="method-detail">
        <a name="M000363"></a>

        <div class="method-heading">
          <a href="Session.src/M000363.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000363.html');return false;">
          <span class="method-name">next_message</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Blocks until a <a href="Session.html#M000354">new</a> packet is available
to be read, and returns that packet. See <a
href="Session.html#M000364">poll_message</a>.
</p>
        </div>
      </div>

      <div id="method-M000362" class="method-detail">
        <a name="M000362"></a>

        <div class="method-heading">
          <a href="Session.src/M000362.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000362.html');return false;">
          <span class="method-name">peer</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a hash of information about the <a
href="Session.html#M000362">peer</a> (remote) side of the socket, including
:ip, :port, :host, and :canonized (see <a
href="Session.html#M000355">host_as_string</a>).
</p>
        </div>
      </div>

      <div id="method-M000364" class="method-detail">
        <a name="M000364"></a>

        <div class="method-heading">
          <a href="Session.src/M000364.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000364.html');return false;">
          <span class="method-name">poll_message</span><span class="method-args">(mode=:nonblock, consume_queue=true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Tries to read the next packet from the socket. If mode is :nonblock (the
default), this will not block and will return nil if there are no packets
waiting to be read. Otherwise, this will block until a packet is available.
Note that some packet types (DISCONNECT, IGNORE, UNIMPLEMENTED, DEBUG, and
KEXINIT) are handled silently by this method, and will never be returned.
</p>
<p>
If a key-exchange is in process and a disallowed packet type is received,
it will be enqueued and otherwise ignored. When a key-exchange is not in
process, and consume_queue is true, packets will be first read from the
queue before the socket is queried.
</p>
        </div>
      </div>

      <div id="method-M000366" class="method-detail">
        <a name="M000366"></a>

        <div class="method-heading">
          <a href="Session.src/M000366.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000366.html');return false;">
          <span class="method-name">push</span><span class="method-args">(packet)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Adds the given packet to the packet queue. If the queue is non-empty, <a
href="Session.html#M000364">poll_message</a> will return packets from the
queue in the order they were received.
</p>
        </div>
      </div>

      <div id="method-M000360" class="method-detail">
        <a name="M000360"></a>

        <div class="method-heading">
          <a href="Session.src/M000360.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000360.html');return false;">
          <span class="method-name">rekey!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Requests a rekey operation, and blocks until the operation completes. If a
rekey is already pending, this returns immediately, having no effect.
</p>
        </div>
      </div>

      <div id="method-M000361" class="method-detail">
        <a name="M000361"></a>

        <div class="method-heading">
          <a href="Session.src/M000361.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000361.html');return false;">
          <span class="method-name">rekey_as_needed</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns immediately if a rekey is already in process. Otherwise, if a rekey
is needed (as indicated by the socket, see PacketStream#if_needs_rekey?)
one is performed, causing this method to block until it completes.
</p>
        </div>
      </div>

      <div id="method-M000367" class="method-detail">
        <a name="M000367"></a>

        <div class="method-heading">
          <a href="Session.src/M000367.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000367.html');return false;">
          <span class="method-name">send_message</span><span class="method-args">(message)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sends the given message via the packet stream, blocking until the entire
message has been sent.
</p>
        </div>
      </div>

      <div id="method-M000359" class="method-detail">
        <a name="M000359"></a>

        <div class="method-heading">
          <a href="Session.src/M000359.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000359.html');return false;">
          <span class="method-name">service_request</span><span class="method-args">(service)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Session.html#M000354">new</a> <a
href="Session.html#M000359">service_request</a> packet for the given
service name, ready for sending to the server.
</p>
        </div>
      </div>

      <div id="method-M000358" class="method-detail">
        <a name="M000358"></a>

        <div class="method-heading">
          <a href="Session.src/M000358.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000358.html');return false;">
          <span class="method-name">shutdown!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Performs a &quot;hard&quot; shutdown of the connection. In general, this
should never be done, but it might be necessary (in a rescue clause, for
instance, when the connection needs to <a
href="Session.html#M000357">close</a> but you don&#8216;t know the status
of the underlying protocol&#8216;s state).
</p>
        </div>
      </div>

      <div id="method-M000365" class="method-detail">
        <a name="M000365"></a>

        <div class="method-heading">
          <a href="Session.src/M000365.html" target="Code" class="method-signature"
            onclick="popupCode('Session.src/M000365.html');return false;">
          <span class="method-name">wait</span><span class="method-args">() {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Waits (blocks) until the given block returns true. If no block is given,
this just waits long enough to see if there are any pending packets. Any
packets read are enqueued (see <a href="Session.html#M000366">push</a>).
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>